{{- define "main" -}}
<div class="Subhead mb-4">
  <h1 class="Subhead-heading">{{ .Title }}</h1>
  {{- with .Description -}}
  <div class="Subhead-description">{{ . }}</div>
  {{- end -}}
</div>

{{- with .Content -}}
<div class="markdown-body mb-4">
  {{ . }}
</div>
{{- end -}}

<div class="Box">
  {{- $paginator := .Paginate .Pages -}}
  {{- range $paginator.Pages -}}
  {{- $post := . -}}
  <div class="Box-row">
    <article class="d-flex flex-column flex-md-row">
      {{- with .Params.image -}}
      <div class="mr-md-3 mb-2 mb-md-0" style="flex-shrink: 0;">
        <a href="{{ $post.RelPermalink }}">
          <img src="{{ . | relURL }}" alt="{{ $post.Title }}" class="rounded-2" style="width: 200px; height: 120px; object-fit: cover;">
        </a>
      </div>
      {{- end -}}
      <div class="flex-auto">
        <h2 class="f3 lh-condensed mb-1">
          <a href="{{ .RelPermalink }}" class="Link--primary">{{ .Title }}</a>
        </h2>
        <div class="d-flex flex-items-center color-fg-muted f6 mb-2">
          <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
            {{ .Date.Format (site.Params.dateFormat | default "2006-01-02") }}
          </time>
          {{- if site.Params.showReadingTime -}}
          <span class="mx-2">&middot;</span>
          <span>{{ .ReadingTime }} {{ i18n "minRead" | default "min read" }}</span>
          {{- end -}}
        </div>
        {{- with .Description | default .Summary -}}
        <p class="color-fg-muted mb-2">{{ . | plainify | truncate 200 }}</p>
        {{- end -}}
        {{- with .Params.tags -}}
        <div class="d-flex flex-wrap">
          {{- range . -}}
          <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}/" class="Label Label--secondary mr-1 mb-1">{{ . }}</a>
          {{- end -}}
        </div>
        {{- end -}}
      </div>
    </article>
  </div>
  {{- else -}}
  <div class="Box-row">
    <p class="color-fg-muted">{{ i18n "noPosts" | default "No posts found." }}</p>
  </div>
  {{- end -}}
</div>

{{- partial "pagination.html" $paginator -}}
{{- end -}}
