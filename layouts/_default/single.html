{{- define "main" -}}
<article>
  <header class="mb-4">
    <h1 class="f1 lh-condensed mb-2">{{ .Title }}</h1>
    <div class="d-flex flex-items-center color-fg-muted f5 mb-3">
      <time datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
        {{ .Date.Format (site.Params.dateFormat | default "2006-01-02") }}
      </time>
      {{- if site.Params.showReadingTime -}}
      <span class="mx-2">&middot;</span>
      <span>{{ .ReadingTime }} {{ i18n "minRead" | default "min read" }}</span>
      {{- end -}}
      {{- if and site.Params.showAuthor .Params.author -}}
      <span class="mx-2">&middot;</span>
      <span>{{ .Params.author }}</span>
      {{- end -}}
    </div>

    {{- with .Params.tags -}}
    <div class="d-flex flex-wrap mb-3" style="gap: 0.5rem;">
      {{- range . -}}
      <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}/" class="topic-tag">{{ . }}</a>
      {{- end -}}
    </div>
    {{- end -}}

    {{- with .Params.image -}}
    {{- partial "featured-image.html" (dict "page" $ "class" "rounded-2 width-full mb-3" "style" "max-height: 400px; object-fit: cover;") -}}
    {{- end -}}
  </header>

  <div class="markdown-body">
    {{ .Content }}
  </div>

  {{- if site.Params.showShareButtons -}}
  <div class="border-top pt-4 mt-4">
    <p class="f5 text-bold mb-2">{{ i18n "share" | default "Share" }}</p>
    <div class="d-flex flex-wrap" style="gap: 0.5rem;">
      <a href="https://twitter.com/intent/tweet?text={{ .Title | urlquery }}&url={{ .Permalink | urlquery }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="octicon mr-1" style="vertical-align: text-bottom;">
          <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"></path>
        </svg>
        X
      </a>
      <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink | urlquery }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="octicon mr-1" style="vertical-align: text-bottom;">
          <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"></path>
        </svg>
        Facebook
      </a>
      <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ .Permalink | urlquery }}&title={{ .Title | urlquery }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="octicon mr-1" style="vertical-align: text-bottom;">
          <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"></path>
        </svg>
        LinkedIn
      </a>
      <a href="https://bsky.app/intent/compose?text={{ .Title | urlquery }}%20{{ .Permalink | urlquery }}" target="_blank" rel="noopener noreferrer" class="btn btn-sm">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" class="octicon mr-1" style="vertical-align: text-bottom;">
          <path d="M3.468 1.948C5.303 3.325 7.276 6.118 8 7.616c.724-1.498 2.697-4.29 4.532-5.668C13.855.955 16 .186 16 2.632c0 .489-.28 4.105-.444 4.692-.572 2.04-2.653 2.561-4.504 2.246 3.236.551 4.06 2.375 2.281 4.2-3.376 3.464-4.852-.872-5.23-1.988-.07-.205-.103-.3-.103-.218 0-.081-.033.013-.103.218-.378 1.116-1.854 5.452-5.23 1.988-1.778-1.825-.955-3.649 2.28-4.2-1.85.315-3.93-.205-4.503-2.246C.28 6.737 0 3.12 0 2.632 0 .186 2.145.955 3.468 1.948"></path>
        </svg>
        Bluesky
      </a>
    </div>
  </div>
  {{- end -}}

  {{- $related := .Site.RegularPages.Related . | first 3 -}}
  {{- with $related -}}
  <div class="border-top pt-4 mt-4">
    <h2 class="f4 mb-3">{{ i18n "relatedPosts" | default "Related Posts" }}</h2>
    <div class="d-flex flex-column flex-md-row">
      {{- range . -}}
      <div class="flex-1 mb-3 mb-md-0 mr-md-3">
        <a href="{{ .RelPermalink }}" class="Link--primary text-bold">{{ .Title }}</a>
        <p class="color-fg-muted f6 mb-0">
          {{ .Date.Format (site.Params.dateFormat | default "2006-01-02") }}
        </p>
      </div>
      {{- end -}}
    </div>
  </div>
  {{- end -}}

  <nav class="border-top pt-4 mt-4">
    <div class="d-flex flex-justify-between">
      {{- with .PrevInSection -}}
      <a href="{{ .RelPermalink }}" class="Link--secondary">
        &larr; {{ .Title | truncate 40 }}
      </a>
      {{- else -}}
      <span></span>
      {{- end -}}
      {{- with .NextInSection -}}
      <a href="{{ .RelPermalink }}" class="Link--secondary">
        {{ .Title | truncate 40 }} &rarr;
      </a>
      {{- end -}}
    </div>
  </nav>
</article>
{{- end -}}
