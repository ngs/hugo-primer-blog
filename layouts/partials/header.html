<header class="AppHeader">
  <div class="AppHeader-globalBar">
    <div class="AppHeader-globalBar-start">
      <a href="{{ .Site.Home.RelPermalink }}" class="AppHeader-logo" aria-label="{{ .Site.Title }}">
        {{- with .Site.Params.logo -}}
        <img src="{{ . | relURL }}" alt="{{ $.Site.Title }}" height="32">
        {{- else -}}
        <span class="AppHeader-logo-text">{{ .Site.Title }}</span>
        {{- end -}}
      </a>

      <nav class="AppHeader-nav" aria-label="{{ i18n "mainNavigation" | default "Main navigation" }}">
        {{- range .Site.Menus.main -}}
        <a href="{{ .URL | relLangURL }}" class="AppHeader-nav-item{{ if $.IsMenuCurrent "main" . }} AppHeader-nav-item--current{{ end }}">
          {{- .Name -}}
        </a>
        {{- end -}}
      </nav>
    </div>

    <div class="AppHeader-globalBar-end">
      {{- partial "theme-toggle.html" . -}}

      {{- if hugo.IsMultilingual -}}
      <details class="dropdown details-reset details-overlay AppHeader-dropdown">
        <summary class="AppHeader-button" aria-haspopup="true" aria-label="{{ i18n "selectLanguage" | default "Select language" }}">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16" fill="currentColor">
            <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM5.78 8.75a9.64 9.64 0 0 0 1.363 4.177c.255.426.542.832.857 1.215.245-.296.551-.705.857-1.215A9.64 9.64 0 0 0 10.22 8.75Zm4.44-1.5a9.64 9.64 0 0 0-1.363-4.177c-.307-.51-.612-.919-.857-1.215a9.927 9.927 0 0 0-.857 1.215A9.64 9.64 0 0 0 5.78 7.25Zm-5.944 1.5H1.543a6.507 6.507 0 0 0 4.666 5.5c-.123-.181-.24-.365-.352-.552-.715-1.192-1.437-2.874-1.581-4.948Zm-2.733-1.5h2.733c.144-2.074.866-3.756 1.58-4.948.12-.197.237-.381.353-.552a6.507 6.507 0 0 0-4.666 5.5Zm10.181 1.5c-.144 2.074-.866 3.756-1.581 4.948-.111.187-.229.371-.352.552a6.507 6.507 0 0 0 4.666-5.5Zm2.733-1.5a6.507 6.507 0 0 0-4.666-5.5c.123.181.241.365.352.552.715 1.192 1.437 2.874 1.581 4.948Z"></path>
          </svg>
          <span class="AppHeader-button-text">{{ .Site.Language.LanguageName }}</span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="12" height="12" fill="currentColor" class="AppHeader-dropdown-caret">
            <path d="m4.427 7.427 3.396 3.396a.25.25 0 0 0 .354 0l3.396-3.396A.25.25 0 0 0 11.396 7H4.604a.25.25 0 0 0-.177.427Z"></path>
          </svg>
        </summary>
        <ul class="dropdown-menu dropdown-menu-sw">
          {{- range $.Site.Languages -}}
          {{- $lang := . -}}
          {{- $targetUrl := (printf "/%s/" .Lang) -}}
          {{- range $.Page.Translations -}}
            {{- if eq .Language.Lang $lang.Lang -}}
              {{- $targetUrl = .RelPermalink -}}
            {{- end -}}
          {{- end -}}
          {{- if eq $.Site.Language.Lang $lang.Lang -}}
            {{- $targetUrl = $.RelPermalink -}}
          {{- end -}}
          <li>
            <a href="{{ $targetUrl }}" class="dropdown-item{{ if eq $.Site.Language.Lang $lang.Lang }} selected{{ end }}" lang="{{ $lang.Lang }}">
              {{- $lang.LanguageName -}}
            </a>
          </li>
          {{- end -}}
        </ul>
      </details>
      {{- end -}}
    </div>
  </div>
</header>
